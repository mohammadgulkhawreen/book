<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Khawreen Library | Digital Book Haven</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #4f46e5;
      --primary-light: #6366f1;
      --secondary: #10b981;
      --dark: #1e293b;
      --light: #f8fafc;
      --gray: #94a3b8;
      --danger: #ef4444;
      --success: #10b981;
      --facebook: #3b5998;
      --whatsapp: #25D366;
      --telegram: #0088cc;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: #f1f5f9;
      color: var(--dark);
      line-height: 1.6;
    }
    
    header {
      background: white;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    header h1 {
      color: var(--primary);
      font-size: 1.8rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    header h1 i {
      color: var(--secondary);
    }
    
    nav ul {
      display: flex;
      list-style: none;
      gap: 1.5rem;
      margin: 0;
      padding: 0;
    }
    
    nav a {
      text-decoration: none;
      color: var(--dark);
      font-weight: 600;
      font-size: 1rem;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    nav a:hover {
      background-color: #e2e8f0;
      color: var(--primary);
    }
    
    nav a i {
      font-size: 1rem;
    }
    
    .main-container {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    
    .container {
      background: white;
      border-radius: 1rem;
      margin-top: 2rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      padding: 2rem;
      animation: fadeIn 0.5s ease;
      display: none;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .container h2 {
      color: var(--primary);
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    form {
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .form-group label {
      font-weight: 600;
      color: var(--dark);
    }
    
    input[type="text"],
    input[type="password"],
    input[type="email"],
    select,
    textarea {
      padding: 0.8rem 1rem;
      border: 1px solid #cbd5e1;
      border-radius: 0.5rem;
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    input[type="text"]:focus,
    input[type="password"]:focus,
    input[type="email"]:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
    }
    
    input[type="file"] {
      padding: 0.5rem;
      border: 1px dashed #cbd5e1;
      border-radius: 0.5rem;
      width: 100%;
    }
    
    .file-input-container {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .file-input-label {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1.5rem;
      border: 2px dashed #cbd5e1;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .file-input-label:hover {
      border-color: var(--primary);
      background-color: #f8fafc;
    }
    
    .file-input-label i {
      font-size: 2rem;
      color: var(--gray);
      margin-bottom: 0.5rem;
    }
    
    .file-input-label span {
      color: var(--gray);
      text-align: center;
    }
    
    button {
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 0.5rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .btn-primary {
      background-color: var(--primary);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: var(--primary-light);
      transform: translateY(-2px);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    
    .btn-secondary {
      background-color: var(--secondary);
      color: white;
    }
    
    .btn-secondary:hover {
      background-color: #0d9e6e;
      transform: translateY(-2px);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    
    .active {
      display: block !important;
    }
    
    #bookList {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }
    
    .book-card {
      background: white;
      border-radius: 0.75rem;
      overflow: hidden;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      border: 1px solid #e2e8f0;
    }
    
    .book-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    }
    
    .book-cover {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .book-details {
      padding: 1.25rem;
    }
    
    .book-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      color: var(--dark);
    }
    
    .book-author {
      color: var(--gray);
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }
    
    .book-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    
    .book-share {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }
    
    .share-btn {
      padding: 0.3rem 0.6rem;
      border-radius: 0.3rem;
      color: white;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .share-btn:hover {
      transform: translateY(-2px);
    }
    
    .facebook-btn {
      background-color: var(--facebook);
    }
    
    .whatsapp-btn {
      background-color: var(--whatsapp);
    }
    
    .telegram-btn {
      background-color: var(--telegram);
    }
    
    .btn-read {
      background-color: var(--primary);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-size: 0.9rem;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .btn-read:hover {
      background-color: var(--primary-light);
    }
    
    .btn-download {
      background-color: var(--secondary);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-size: 0.9rem;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .btn-download:hover {
      background-color: #0d9e6e;
    }
    
    .toast {
      position: fixed;
      top: 1rem;
      right: 1rem;
      padding: 1rem 1.5rem;
      border-radius: 0.5rem;
      color: white;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      animation: slideIn 0.3s ease, fadeOut 0.5s ease 2.5s forwards;
    }
    
    .toast.success {
      background-color: var(--success);
    }
    
    .toast.error {
      background-color: var(--danger);
    }
    
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }
    
    @media (max-width: 768px) {
      header {
        flex-direction: column;
        padding: 1rem;
        gap: 1rem;
      }
      
      nav ul {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .container {
        padding: 1.5rem;
      }
      
      #bookList {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1><i class="fas fa-book-open"></i> Khawreen Library</h1>
    <nav>
      <ul>
        <li><a href="#" onclick="showSection('register')"><i class="fas fa-user-plus"></i> Register</a></li>
        <li><a href="#" onclick="showSection('login')"><i class="fas fa-sign-in-alt"></i> Login</a></li>
        <li><a href="#" onclick="showSection('upload')"><i class="fas fa-upload"></i> Upload</a></li>
        <li><a href="#" onclick="showSection('books')"><i class="fas fa-book"></i> Books</a></li>
      </ul>
    </nav>
  </header>
  
  <div class="main-container">
    <div class="container" id="register">
      <h2><i class="fas fa-user-plus"></i> Create Account</h2>
      <form id="registerForm">
        <div class="form-group">
          <label for="username">Username</label>
          <input type="text" id="username" name="username" placeholder="Enter your username" required>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" name="password" placeholder="Create a password" required>
        </div>
        <div class="form-group">
          <label for="email">Email (optional)</label>
          <input type="email" id="email" name="email" placeholder="your@email.com">
        </div>
        <button type="submit" class="btn-primary">
          <i class="fas fa-user-plus"></i> Register
        </button>
      </form>
    </div>
    
    <div class="container" id="login">
      <h2><i class="fas fa-sign-in-alt"></i> Welcome Back</h2>
      <form id="loginForm">
        <div class="form-group">
          <label for="login-username">Username</label>
          <input type="text" id="login-username" name="username" placeholder="Enter your username" required>
        </div>
        <div class="form-group">
          <label for="login-password">Password</label>
          <input type="password" id="login-password" name="password" placeholder="Enter your password" required>
        </div>
        <button type="submit" class="btn-primary">
          <i class="fas fa-sign-in-alt"></i> Login
        </button>
      </form>
    </div>
    
    <div class="container" id="upload">
      <h2><i class="fas fa-upload"></i> Share Your Book</h2>
      <form id="uploadForm" enctype="multipart/form-data">
        <div class="form-group">
          <label for="title">Book Title</label>
          <input type="text" id="title" name="title" placeholder="Enter book title" required>
        </div>
        <div class="form-group">
          <label for="author">Author Name</label>
          <input type="text" id="author" name="author" placeholder="Enter author name" required>
        </div>
        <div class="form-group">
          <label>Book Cover</label>
          <div class="file-input-container">
            <label for="cover" class="file-input-label">
              <i class="fas fa-image"></i>
              <span>Click to upload cover image (JPEG, PNG)</span>
            </label>
            <input type="file" id="cover" name="cover" accept="image/*" required style="display: none;">
          </div>
        </div>
        <div class="form-group">
          <label>PDF File</label>
          <div class="file-input-container">
            <label for="pdf" class="file-input-label">
              <i class="fas fa-file-pdf"></i>
              <span>Click to upload PDF document</span>
            </label>
            <input type="file" id="pdf" name="pdf" accept="application/pdf" required style="display: none;">
          </div>
        </div>
        <button type="submit" class="btn-secondary">
          <i class="fas fa-upload"></i> Upload Book
        </button>
      </form>
    </div>
    
    <div class="container active" id="books">
      <h2><i class="fas fa-book"></i> Explore Our Collection</h2>
      <div id="bookList"></div>
    </div>
  </div>
  
  <script>
    let token = "";
    let currentUser = null;
    let books = []; // د کتابونو د ذخیرې لپاره

    // د پیغام نمایش لپاره فعالیت
    function showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
        ${message}
      `;
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.remove();
      }, 3000);
    }

    // د برخو نمایش لپاره فعالیت
    function showSection(id) {
      document.querySelectorAll('.container').forEach(div => {
        div.classList.remove('active');
      });
      const section = document.getElementById(id);
      if (section) {
        section.classList.add('active');
        if (id === 'books') displayBooks();
      }
    }

    // د فایل انتخاب نمایش
    function setupFileInput(inputId, labelSelector) {
      const input = document.getElementById(inputId);
      const label = document.querySelector(labelSelector);
      
      input.addEventListener('change', function(e) {
        if (this.files.length > 0) {
          label.innerHTML = `
            <i class="fas fa-check-circle" style="color: var(--success)"></i>
            <span>${this.files[0].name}</span>
          `;
        }
      });
    }

    // د کتابونو نمایش
    function displayBooks() {
      const bookList = document.getElementById('bookList');
      
      if (books.length === 0) {
        bookList.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: var(--gray)">
            <i class="fas fa-book-open" style="font-size: 3rem; margin-bottom: 1rem;"></i>
            <h3>No books available yet</h3>
            <p>Be the first to upload a book!</p>
          </div>
        `;
        return;
      }
      
      bookList.innerHTML = books.map(book => `
        <div class="book-card">
          <img src="${book.coverPath || 'https://via.placeholder.com/280x200?text=No+Cover'}" class="book-cover" alt="${book.title}">
          <div class="book-details">
            <h3 class="book-title">${book.title}</h3>
            <p class="book-author">By ${book.author}</p>
            
            <div class="book-share">
              <button class="share-btn facebook-btn" onclick="shareOnFacebook('${book.title}', '${book.pdfPath}')">
                <i class="fab fa-facebook-f"></i>
              </button>
              <button class="share-btn whatsapp-btn" onclick="shareOnWhatsApp('${book.title}', '${book.pdfPath}')">
                <i class="fab fa-whatsapp"></i>
              </button>
              <button class="share-btn telegram-btn" onclick="shareOnTelegram('${book.title}', '${book.pdfPath}')">
                <i class="fab fa-telegram-plane"></i>
              </button>
            </div>
            
            <div class="book-actions">
              <a href="${book.pdfPath || '#'}" target="_blank" class="btn-read">
                <i class="fas fa-book-open"></i> Read Online
              </a>
              <a href="${book.pdfPath || '#'}" download class="btn-download">
                <i class="fas fa-download"></i> Download
              </a>
            </div>
            
            ${currentUser && currentUser.username === book.uploadedBy ? `
            <div style="text-align: right; margin-top: 0.5rem;">
              <button class="delete-btn" data-id="${book.id}" style="background: none; border: none; color: var(--danger); cursor: pointer;">
                <i class="fas fa-trash"></i> Delete
              </button>
            </div>
            ` : ''}
          </div>
        </div>
      `).join('');
    }

    // د ټولنیزو رسنیو د شیرولو فعالیتونه
    function shareOnFacebook(title, url) {
      const shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent('Check out this book: ' + title)}`;
      window.open(shareUrl, '_blank', 'width=600,height=400');
    }

    function shareOnWhatsApp(title, url) {
      const shareUrl = `https://wa.me/?text=${encodeURIComponent('Check out this book: ' + title + ' - ' + url)}`;
      window.open(shareUrl, '_blank', 'width=600,height=400');
    }

    function shareOnTelegram(title, url) {
      const shareUrl = `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent('Check out this book: ' + title)}`;
      window.open(shareUrl, '_blank', 'width=600,height=400');
    }

    // د ثبت فعالیت
    document.getElementById('registerForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const form = e.target;
      
      // د مثال په توګه ثبت
      currentUser = {
        username: form.username.value,
        email: form.email.value
      };
      
      showToast('Registration successful! Please login.');
      showSection('login');
      form.reset();
    });

    // د ننوتلو فعالیت
    document.getElementById('loginForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const form = e.target;
      
      // د مثال په توګه ننوتل
      token = "sample-token-" + Math.random().toString(36).substr(2);
      currentUser = {
        username: form.username.value
      };
      
      showToast('Login successful!');
      showSection('books');
    });

    // د اپلوډ فعالیت
    document.getElementById('uploadForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const form = e.target;
      
      if (!currentUser) {
        showToast('Please login first', 'error');
        showSection('login');
        return;
      }
      
      // د مثال په توګه کتاب اضافه کول
      const newBook = {
        id: 'book-' + Math.random().toString(36).substr(2, 9),
        title: form.title.value,
        author: form.author.value,
        coverPath: form.cover.files[0] ? URL.createObjectURL(form.cover.files[0]) : '',
        pdfPath: form.pdf.files[0] ? URL.createObjectURL(form.pdf.files[0]) : '',
        uploadedBy: currentUser.username
      };
      
      books.unshift(newBook);
      showToast('Book uploaded successfully!');
      form.reset();
      
      // د فایل لیبلونو بیا تنظیم
      document.querySelector('label[for="cover"]').innerHTML = `
        <i class="fas fa-image"></i>
        <span>Click to upload cover image (JPEG, PNG)</span>
      `;
      document.querySelector('label[for="pdf"]').innerHTML = `
        <i class="fas fa-file-pdf"></i>
        <span>Click to upload PDF document</span>
      `;
      
      displayBooks();
    });

    // د کتاب ړنګول
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('delete-btn') || e.target.closest('.delete-btn')) {
        const btn = e.target.classList.contains('delete-btn') ? e.target : e.target.closest('.delete-btn');
        const bookId = btn.dataset.id;
        
        if (confirm('Are you sure you want to delete this book?')) {
          books = books.filter(book => book.id !== bookId);
          showToast('Book deleted successfully');
          displayBooks();
        }
      }
    });

    // د فایل انپوټ تنظیم
    setupFileInput('cover', 'label[for="cover"]');
    setupFileInput('pdf', 'label[for="pdf"]');

    // د مثال په توګه لومړني کتابونه
    books = [
      {
        id: 'book-1',
        title: 'Sample Book 1',
        author: 'John Doe',
        coverPath: 'https://via.placeholder.com/280x200?text=Sample+Book+1',
        pdfPath: 'sample-book-1.pdf',
        uploadedBy: 'admin'
      },
      {
        id: 'book-2',
        title: 'Sample Book 2',
        author: 'Jane Smith',
        coverPath: 'https://via.placeholder.com/280x200?text=Sample+Book+2',
        pdfPath: 'sample-book-2.pdf',
        uploadedBy: 'admin'
      }
    ];

    // د کتابونو برخه په لومړي ځل نمایش کول
    window.addEventListener('DOMContentLoaded', () => {
      displayBooks();
    });
  </script>
</body>
</html>